{"version":3,"sources":["webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditPopup.scss?c6ed","webpack:///./src/ui/src/components/CreatableList/CreatableList.scss?37a9","webpack:///./src/ui/src/components/CreatableDropdown/CreatableDropdown.scss?fb39","webpack:///./src/ui/src/components/CreatableDropdown/CreatableDropdown.scss","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditPopup.scss","webpack:///./src/ui/src/components/CreatableList/CreatableList.scss","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditSignaturePopup/SignatureOptionsDropdown/SignatureOptionsDropdown.scss?45fa","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditSignaturePopup/SignatureOptionsDropdown/SignatureOptionsDropdown.scss","webpack:///./src/ui/src/components/CreatableDropdown/CreatableDropdown.js","webpack:///./src/ui/src/components/CreatableDropdown/index.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldPopupDimensionsInput/index.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldPopupDimensionsInput/FormFieldPopupDimensionsInput.js","webpack:///./src/ui/src/components/CreatableList/CreatableListItem.js","webpack:///./src/ui/src/components/CreatableList/CreatableListContainer.js","webpack:///./src/ui/src/components/CreatableList/index.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditPopupIndicator/index.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditPopupIndicator/FormFieldEditPopupIndicator.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditPopup.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditSignaturePopup/SignatureOptionsDropdown/SignatureOptionsDropdown.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditSignaturePopup/SignatureOptionsDropdown/index.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditSignaturePopup/FormFieldEditSignaturePopup.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditSignaturePopup/index.js","webpack:///./src/ui/src/components/FormFieldEditPopup/FormFieldEditPopupContainer.js","webpack:///./src/ui/src/components/FormFieldEditPopup/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","webComponents","document","getElementsByTagName","length","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","forEach","styleNode","innerHTML","cloneNode","push","head","exports","locals","CreatableDropdown","onChange","onInputChange","onCreateOption","textPlaceholder","value","isClearable","isValid","messageText","t","useTranslation","customStyles","control","provided","state","backgroundColor","borderColor","selectProps","boxShadow","singleValue","color","menu","option","input","ReactSelectWebComponentProvider","placeholder","formatCreateLabel","styles","className","undefined","FormFieldPopupDimensionsInput","width","height","onWidthChange","onHeightChange","id","type","min","e","target","CreatableListItem","index","onDeleteItem","moveListItem","addItem","ItemTypes","ref","useRef","drop","useDrop","accept","hover","item","monitor","current","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","top","hoverClientY","getClientOffset","y","useDrag","collect","isDragging","drag","onChangeHandler","useCallback","event","addNewItemOnEnterKey","key","opacity","style","Icon","glyph","displayValue","onKeyPress","autoFocus","Button","title","img","onClick","CreatableList","onOptionsUpdated","popupRef","draggableItems","map","useState","items","setItems","nextId","setNextId","containerRef","useEffect","sanitizedOptions","onAddItem","validatePopupHeight","handleDeleteItem","updatedItems","filter","result","dragItem","itemsWithoutDraggedElement","_item","itemsWithDraggedElementAtNewPosition","slice","splice","popupContainer","containerElement","availableHeight","window","innerHeight","isListOverflowing","scrollHeight","clientHeight","maxContainerHeight","childElementCount","maxHeight","label","FormFieldEditPopupIndicator","indicator","indicatorPlaceholder","Choice","checked","isChecked","showIndicator","toggleIndicator","Input","fillWidth","disabled","FormFieldEditPopup","fields","flags","closeFormFieldEditPopup","validationMessage","radioButtonGroups","onOptionsChange","annotation","selectedRadioGroup","getPageHeight","getPageWidth","redrawAnnotation","deleteAnnotation","classNames","Popup","Width","toFixed","setWidth","Height","setHeight","initialWidth","initialHeight","radioButtonGroup","setRadioButtonGroup","renderInput","field","required","message","focus","renderTextInput","displayRadioGroups","group","inputValue","onSelectInputChange","renderSelectInput","getFormFieldPlaceholderType","flag","validatedWidth","maxWidth","X","validateWidth","validatedHeight","Y","validateHeight","HorizontalDivider","find","includes","trim","dataElement","CustomArrowIndicator","props","menuIsOpen","IndicatorsContainer","SignatureOptionsDropdown","isDarkMode","initialOption","valueContainer","base","padding","minHeight","container","indicatorsContainer","paddingRight","signatureOptions","SignatureModes","FULL_SIGNATURE","INITIALS","init","setValue","DataElementWrapper","isSearchable","components","FormFieldEditSignaturePopup","onSignatureOptionChange","getSignatureOptionHandler","setIndicatorPlaceholder","FormFieldEditPopupContainer","formFieldCreationManager","core","getFormFieldCreationManager","fieldLabels","getFieldLabels","fieldName","setFieldName","fieldValue","setFieldValue","isReadOnly","setReadOnly","isMultiLine","setMultiLine","isRequired","setIsRequired","isMultiSelect","setIsMultiSelect","setIsValid","setRadioButtonGroups","left","position","setPosition","setValidationMessage","setShowIndicator","indicatorText","setIndicatorText","isOpen","useSelector","selectors","isElementOpen","DataElements","FORM_FIELD_EDIT_POPUP","shallowEqual","dispatch","useDispatch","closeAndReset","actions","enableElement","ANNOTATION_POPUP","PRIORITY_THREE","closeElement","useOnClickOutside","deleteFormFieldPlaceholder","deleteAnnotations","onFormFieldCreationModeStarted","getRadioButtonGroups","addEventListener","removeEventListener","radioGroups","getAnnotationsList","isFormFieldPlaceholder","radioButton","getFieldName","dedupedRadioGroups","Set","useLayoutEffect","getAnnotationPopupPositionBasedOn","getFieldValue","getFieldFlag","READ_ONLY","MULTI_LINE","REQUIRED","MULTI_SELECT","isFieldNameValid","getShowIndicator","getIndicatorText","onFieldNameChange","name","validatedResponse","mapValidationResponseToTranslation","validationResponse","translationKey","errorType","onFieldValueChange","onReadOnlyChange","setFieldFlag","onMultiLineChange","onRequiredChange","onMultiSelectChange","onFieldOptionsChange","setFieldOptions","onShowFieldIndicatorChange","onFieldIndicatorTextChange","onCloseRadioButtonPopup","indexOf","getAnnotationManager","drawAnnotationsFromList","getCurrentPage","signatureOption","setSignatureOption","getSignatureOption","formFieldPlaceHolder","NAME","VALUE","RADIO_GROUP","textFields","defaultFields","radioButtonFields","listBoxFields","comboBoxFields","isMobile","isMobileSize","textFieldFlags","signatureFlags","checkBoxFlags","radioButtonFlags","listBoxFlags","comboBoxFlags","renderPopUp","fieldOptions","intent","getFieldOptions","renderComboBoxFormFieldEditPopup","renderFormFieldEditPopup","open","closed","data-element","cancel","React","memo"],"mappings":"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","file":"chunks/23.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./FormFieldEditPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./CreatableList.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./CreatableDropdown.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".messageText{width:100%;font-size:11px;margin-top:4px}\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".open.FormFieldEditPopupContainer{visibility:visible}.closed.FormFieldEditPopupContainer{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.FormFieldEditPopupContainer{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.FormFieldEditPopupContainer:empty{padding:0}.FormFieldEditPopupContainer .buttons{display:flex}.FormFieldEditPopupContainer .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FormFieldEditPopupContainer .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FormFieldEditPopupContainer .Button{width:42px;height:42px}}.FormFieldEditPopupContainer .Button:hover{background:var(--popup-button-hover)}.FormFieldEditPopupContainer .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FormFieldEditPopupContainer .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FormFieldEditPopupContainer .Button .Icon{width:24px;height:24px}}.is-vertical.FormFieldEditPopupContainer .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-left:var(--padding-small);padding-right:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.FormFieldEditPopupContainer .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.FormFieldEditPopupContainer .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.FormFieldEditPopupContainer .Button.main-menu-button{width:100%;height:32px}}.is-vertical.FormFieldEditPopupContainer .Button.main-menu-button .Icon{margin-right:10px}.is-vertical.FormFieldEditPopupContainer .Button.main-menu-button span{white-space:nowrap}@-webkit-keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@-webkit-keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.FormFieldEditPopup{padding:8px 12px 6px}.FormFieldEditPopup .fields-container{margin-bottom:5px}.FormFieldEditPopup .radio-group-label{grid-area:group-message;font-size:10px;width:240px;padding-top:5px}.FormFieldEditPopup .field-input{padding:5px 0;display:grid;grid-template-columns:1fr 2fr;grid-template-areas:\\\"label dropdown\\\" \\\"group-message group-message\\\"}.FormFieldEditPopup .field-input label{padding-top:10px;padding-right:10px;grid-area:label}.FormFieldEditPopup .field-flags-container{display:flex;flex-direction:column}.FormFieldEditPopup .field-flags-title{padding-bottom:5px}.FormFieldEditPopup .form-buttons-container{display:flex;flex-direction:row;justify-content:flex-end;padding-top:5px}.FormFieldEditPopup .ok-form-field-button{display:flex;justify-content:center;align-items:center;background-color:var(--primary-button);border:1px solid var(--primary-button);color:var(--primary-button-text);padding:6px 18px;width:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:4px;height:28px;cursor:pointer}.FormFieldEditPopup .ok-form-field-button:hover{background:var(--primary-button-hover);border:1px solid var(--primary-button-hover)}.FormFieldEditPopup .cancel-form-field-button{display:flex;justify-content:center;align-items:center;color:var(--secondary-button-text);padding:6px 18px;width:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:28px;cursor:pointer}.FormFieldEditPopup .cancel-form-field-button:hover{color:var(--secondary-button-hover);background:transparent}.field-options-container{width:180px}.field-options-container .creatable-list{max-height:200px;overflow:auto}.field-options-container input{width:120px;height:28px}.field-options-container .Button.add-item-button{width:90px;margin-left:0;justify-content:left}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .field-options-container .Button.add-item-button{width:110px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .field-options-container .Button.add-item-button{width:110px}}.form-dimension{padding-top:10px;display:flex;align-items:center}.form-dimension-input{padding-left:5px}.form-dimension-input input::-webkit-inner-spin-button,.form-dimension-input input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form-dimension-input input[type=number]{-moz-appearance:textfield}.form-dimension-input input{width:55px;height:28px}.FormFieldEditPopupContainer{border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .FormFieldEditPopupContainer{width:95%;position:fixed;left:1.25%!important;top:105px!important}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .FormFieldEditPopupContainer{width:95%;position:fixed;left:1.25%!important;top:105px!important}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".creatable-list{display:flex;flex-direction:column}.creatable-list-item{display:flex;flex-direction:row;align-items:center}.add-item-button{display:flex;align-items:center;width:78px;cursor:pointer}.icon-handle{cursor:-webkit-grab;cursor:grab}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../../node_modules/css-loader/index.js!../../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../../node_modules/sass-loader/dist/cjs.js!./SignatureOptionsDropdown.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\n                if (webComponents.length > 0) {\n                  const clonedStyleTags = [];\n                  for (let i = 0; i < webComponents.length; i++) {\n                    const webComponent = webComponents[i];\n                    if (i === 0) {\n                      webComponent.shadowRoot.appendChild(styleTag);\n                      styleTag.onload = function () {\n                        if (clonedStyleTags.length > 0) {\n                          clonedStyleTags.forEach((styleNode) => {\n                            // eslint-disable-next-line no-unsanitized/property\n                            styleNode.innerHTML = styleTag.innerHTML;\n                          });\n                        }\n                      };\n                    } else {\n                      const styleNode = styleTag.cloneNode(true);\n                      webComponent.shadowRoot.appendChild(styleNode);\n                      clonedStyleTags.push(styleNode);\n                    }\n                  }\n                } else {\n                  document.head.appendChild(styleTag);\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".signature-options-container{padding:5px 0;display:grid;grid-template-columns:.5fr 1fr;grid-template-areas:\\\"label dropdown\\\";align-items:center}.signature-options-container label{grid-area:label}.arrow{width:12px;height:16px;margin-top:2px}\", \"\"]);\n\n// exports\n","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport CreatableSelect from 'react-select/creatable';\nimport ReactSelectWebComponentProvider from '../ReactSelectWebComponentProvider';\n\nimport './CreatableDropdown.scss';\n\nconst CreatableDropdown = ({\n  onChange,\n  onInputChange,\n  options,\n  onCreateOption,\n  textPlaceholder,\n  value,\n  isClearable,\n  isValid,\n  messageText,\n}) => {\n  const { t } = useTranslation();\n\n  const customStyles = {\n    control: (provided, state) => {\n      return {\n        ...provided,\n        backgroundColor: 'var(--component-background)',\n        borderColor: state.selectProps.isValid ? 'hsl(0, 0%, 80%)' : 'hsl(28, 80%, 52%)',\n        boxShadow: state.selectProps.isValid ? null : '0 0 0 2px rgba(230, 126, 34, 0.4)',\n        '&:hover': {\n          borderColor: state.selectProps.isValid ? 'hsl(0, 0%, 70%)' : 'hsl(28, 80%, 52%)',\n        }\n      };\n    },\n    singleValue: (provided) => ({\n      ...provided,\n      color: 'var(--text-color)',\n    }),\n    menu: (provided) => ({\n      ...provided,\n      backgroundColor: 'var(--component-background)',\n      color: 'var(--text-color)',\n    }),\n    option: (provided) => ({\n      ...provided,\n      backgroundColor: 'var(--component-background)',\n      color: 'var(--text-color)',\n      '&:hover': {\n        backgroundColor: 'var(--popup-button-hover)',\n      }\n    }),\n    input: (provided) => ({\n      ...provided,\n      backgroundColor: 'var(--component-background)',\n      color: 'var(--text-color)',\n    }),\n  };\n\n  return (\n    <ReactSelectWebComponentProvider>\n      <CreatableSelect\n        isClearable={isClearable}\n        onChange={onChange}\n        onInputChange={onInputChange}\n        options={options}\n        onCreateOption={onCreateOption}\n        placeholder={textPlaceholder}\n        formatCreateLabel={(value) => `${t('action.create')} ${value}`}\n        value={value}\n        styles={customStyles}\n        isValid={isValid}\n      />\n      {messageText ? <div className=\"messageText\">{messageText}</div> : undefined}\n    </ReactSelectWebComponentProvider>\n  );\n};\n\nexport default CreatableDropdown;\n","import CreatableDropdown from './CreatableDropdown';\n\nexport default CreatableDropdown;","import FormFieldPopupDimensionsInput from './FormFieldPopupDimensionsInput';\n\nexport default FormFieldPopupDimensionsInput;","import React from 'react';\nimport { useTranslation } from 'react-i18next';\n\nconst FormFieldPopupDimensionsInput = ({ width, height, onWidthChange, onHeightChange }) => {\n  const { t } = useTranslation();\n\n  return (\n    <div className=\"form-dimension\">\n      <div>{t('formField.formFieldPopup.size')}:</div>\n      <div className=\"form-dimension-input\">\n        <input\n          id=\"form-field-width\"\n          type=\"number\"\n          min={0}\n          value={width}\n          onChange={(e) => onWidthChange(e.target.value)}\n        /> {t('formField.formFieldPopup.width')}\n      </div>\n      <div className=\"form-dimension-input\">\n        <input\n          id=\"form-field-height\"\n          type=\"number\"\n          min={0}\n          value={height}\n          onChange={(e) => onHeightChange(e.target.value)}\n        /> {t('formField.formFieldPopup.height')}\n      </div>\n    </div>\n  );\n};\n\nexport default FormFieldPopupDimensionsInput;","import React, { useRef, useCallback } from 'react';\nimport Button from '../Button';\nimport { useDrag, useDrop } from 'react-dnd';\nimport Icon from 'components/Icon';\n\nimport './CreatableList.scss';\n\nconst CreatableListItem = ({\n  option,\n  index,\n  onChange,\n  onDeleteItem,\n  moveListItem,\n  id,\n  addItem,\n}) => {\n  const ItemTypes = {\n    ITEM: 'item'\n  };\n\n  const ref = useRef(null);\n\n  const [, drop] = useDrop({\n    accept: ItemTypes.ITEM,\n    hover(item, monitor) {\n      if (!ref.current) {\n        return;\n      }\n      const dragIndex = item.index;\n      const hoverIndex = index;\n\n      // Don't replace items with themselves\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      // Determine rectangle on screen\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\n\n      // Get vertical middle\n      const hoverMiddleY =\n        (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\n      // Determine mouse position\n      const clientOffset = monitor.getClientOffset();\n\n      // Get pixels to the top\n      const hoverClientY = (clientOffset).y - hoverBoundingRect.top;\n\n      // Only perform the move when the mouse has crossed half of the items height\n      // When dragging downwards, only move when the cursor is below 50%\n      // When dragging upwards, only move when the cursor is above 50%\n\n      // Dragging downwards\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      }\n\n      // Dragging upwards\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      }\n\n      // Time to actually perform the action\n      moveListItem(dragIndex, hoverIndex);\n\n      // Note: we're mutating the monitor item here!\n      // Generally it's better to avoid mutations,\n      // but it's good here for the sake of performance\n      // to avoid expensive index searches.\n      item.index = hoverIndex;\n    },\n  });\n\n  const [{ isDragging }, drag] = useDrag({\n    type: ItemTypes.ITEM,\n    item: { type: ItemTypes.ITEM, id, index },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const onChangeHandler = useCallback((event) => {\n    onChange(event.target.value);\n  }, [onChange]);\n\n  const addNewItemOnEnterKey = useCallback((event) => {\n    if (event.key === 'Enter') {\n      addItem();\n    }\n  }, [addItem]);\n\n  drag(drop(ref));\n\n  const opacity = isDragging ? 0 : 1;\n\n  return (\n    <div ref={ref} style={{ opacity }} className=\"creatable-list-item\">\n      <div className=\"icon-handle\">\n        <Icon\n          glyph=\"icon-drag-handle\"\n        />\n      </div>\n      <input\n        type=\"text\"\n        onChange={onChangeHandler}\n        value={option.displayValue}\n        onKeyPress={addNewItemOnEnterKey}\n        autoFocus\n      />\n      <Button\n        title=\"action.delete\"\n        img=\"icon-delete-line\"\n        onClick={onDeleteItem}\n      />\n    </div>\n  );\n};\n\nexport default CreatableListItem;","import React, { useEffect, useState, useCallback, useRef } from 'react';\nimport Button from '../Button';\nimport { useTranslation } from 'react-i18next';\nimport CreatableListItem from './CreatableListItem';\n\nimport './CreatableList.scss';\n\nconst CreatableListContainer = ({\n  options,\n  onOptionsUpdated,\n  popupRef,\n}) => {\n  const { t } = useTranslation();\n\n  // In order to be draggable, each item needs a unique Id\n  // These are managed internally in this component and not exposed to the user\n  const draggableItems = options.map((option, index) => {\n    return {\n      id: index,\n      displayValue: option.displayValue,\n      value: option.value,\n    };\n  });\n  const [items, setItems] = useState(draggableItems);\n  const [nextId, setNextId] = useState(draggableItems.length);\n  const containerRef = useRef();\n\n  useEffect(() => {\n    const sanitizedOptions = items.map((item) => ({ value: item.value, displayValue: item.displayValue }));\n    onOptionsUpdated(sanitizedOptions);\n  }, [items, onOptionsUpdated]);\n\n  const onAddItem = useCallback(() => {\n    const id = nextId;\n    setNextId(nextId + 1);\n    setItems([...items, { id, value: '', displayValue: '' }]);\n    validatePopupHeight();\n  }, [nextId, items]);\n\n  const handleDeleteItem = (id) => () => {\n    const updatedItems = items.filter((item) => {\n      return id !== item.id;\n    });\n\n    setItems(updatedItems);\n  };\n\n  const handleItemValueChange = (id) => (value) => {\n    const updatedItems = items.map((item) => {\n      if (item.id !== id) {\n        return item;\n      }\n      return { ...item, value, displayValue: value };\n    });\n\n    setItems(updatedItems);\n  };\n\n  // We add this helper function that doesn't mutate the original array\n  // This way we dont need to add a package like immutability-helper as this is the only use case\n  function addItemAtIndex(array, index, value) {\n    const result = array.slice(0);\n    result.splice(index, 0, value);\n    return result;\n  }\n\n  const moveListItem = useCallback(\n    (dragIndex, hoverIndex) => {\n      const dragItem = items[dragIndex];\n\n      // Update items array without mutating original items array for perf reasons\n      // First we remove the element being dragged\n      const itemsWithoutDraggedElement = items.filter((_item, index) => index !== dragIndex);\n      // Now we add the dragged element at the index it's currently hovering\n      const itemsWithDraggedElementAtNewPosition = addItemAtIndex(itemsWithoutDraggedElement, hoverIndex, dragItem);\n\n      setItems(itemsWithDraggedElementAtNewPosition);\n    },\n    [items],\n  );\n\n  const validatePopupHeight = () => {\n    const popupContainer = popupRef.current;\n    const containerElement = containerRef.current;\n    const { bottom } = popupContainer.getBoundingClientRect();\n    const viewportHeight = window.innerHeight;\n    const availableHeight = viewportHeight - bottom;\n    const isListOverflowing = containerElement.scrollHeight > containerElement.clientHeight;\n    if (availableHeight <= 40 && !isListOverflowing) {\n      const inputCount = containerElement.childElementCount;\n      const maxContainerHeight = inputCount * 40;\n      containerElement.style.maxHeight = `${maxContainerHeight}px`;\n    } else if (availableHeight > 40) {\n      containerElement.style.maxHeight = '200px';\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"creatable-list\" ref={containerRef}>\n        {items.map((item, index) => (\n          <CreatableListItem\n            key={item.id}\n            index={index}\n            id={item.id}\n            option={item}\n            onChange={handleItemValueChange(item.id)}\n            onDeleteItem={handleDeleteItem(item.id)}\n            moveListItem={moveListItem}\n            addItem={onAddItem}\n          />\n        ))}\n      </div>\n      <Button\n        title={t('action.addOption')}\n        className=\"add-item-button\"\n        label={t('action.addOption')}\n        img=\"icon-plus-sign\"\n        onClick={onAddItem}\n      />\n    </div>\n  );\n};\n\nexport default CreatableListContainer;","import CreatableList from './CreatableListContainer';\n\nexport default CreatableList;","import FormFieldEditPopupIndicator from './FormFieldEditPopupIndicator';\n\nexport default FormFieldEditPopupIndicator;","import React from 'react';\nimport { Choice, Input } from '@pdftron/webviewer-react-toolkit';\nimport { useTranslation } from 'react-i18next';\n\n\nconst FormFieldEditPopupIndicator = ({ indicator, indicatorPlaceholder }) => {\n  const { t } = useTranslation();\n  const onIndicatorChange = (showIndicator) => {\n    if (indicator.value.length < 1 && showIndicator) {\n      indicator.onChange(indicatorPlaceholder);\n    }\n    indicator.toggleIndicator(showIndicator);\n  };\n\n  return (\n    <div className=\"form-field-indicator-container\">\n      <span className=\"field-indicator-title\">{t('formField.formFieldPopup.fieldIndicator')}</span>\n      <Choice\n        checked={indicator.isChecked}\n        onChange={(event) => onIndicatorChange(event.target.checked)}\n        label={t(indicator.label)}\n      />\n      <div className=\"field-indicator\">\n        <Input\n          type=\"text\"\n          onChange={(event) => indicator.onChange(event.target.value)}\n          value={indicator.value}\n          fillWidth=\"false\"\n          placeholder={indicatorPlaceholder}\n          disabled={!indicator.isChecked}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FormFieldEditPopupIndicator;","import React, { useState, useEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport Button from '../Button';\nimport { useTranslation } from 'react-i18next';\nimport { Choice, Input } from '@pdftron/webviewer-react-toolkit';\nimport CreatableDropdown from '../CreatableDropdown';\nimport FormFieldPopupDimensionsInput from './FormFieldPopupDimensionsInput';\nimport HorizontalDivider from '../HorizontalDivider';\n\nimport './FormFieldEditPopup.scss';\nimport CreatableList from '../CreatableList';\nimport FormFieldEditPopupIndicator from './FormFieldEditPopupIndicator';\n\nconst FormFieldEditPopup = ({\n  fields,\n  flags,\n  closeFormFieldEditPopup,\n  isValid,\n  validationMessage,\n  radioButtonGroups,\n  options,\n  onOptionsChange,\n  annotation,\n  selectedRadioGroup,\n  getPageHeight,\n  getPageWidth,\n  redrawAnnotation,\n  indicator,\n  deleteAnnotation,\n}) => {\n  const { t } = useTranslation();\n  const className = classNames({\n    Popup: true,\n    FormFieldEditPopup: true,\n  });\n\n  const [width, setWidth] = useState(annotation.Width.toFixed(0));\n  const [height, setHeight] = useState(annotation.Height.toFixed(0));\n\n  const [initialWidth] = useState(annotation.Width.toFixed(0));\n  const [initialHeight] = useState(annotation.Height.toFixed(0));\n  const popupRef = useRef(null);\n\n  // If no radio group is yet set, set this as null as the select input will then show the correct prompt\n  const [radioButtonGroup, setRadioButtonGroup] = useState(\n    selectedRadioGroup === '' ? null : { value: selectedRadioGroup, label: selectedRadioGroup },\n  );\n\n  useEffect(() => {\n    // When we open up the popup the async call to set the right radio group may not be finished\n    // we deal with this timing issue by updating state when the prop is refreshed\n    if (selectedRadioGroup !== '') {\n      setRadioButtonGroup({ value: selectedRadioGroup, label: selectedRadioGroup });\n    } else {\n      setRadioButtonGroup(null);\n    }\n  }, [selectedRadioGroup]);\n\n  function onSelectInputChange(field, input) {\n    if (input === null) {\n      field.onChange('');\n      setRadioButtonGroup(null);\n    } else {\n      field.onChange(input.value);\n      setRadioButtonGroup({ value: input.value, label: input.value });\n    }\n  }\n\n  function onWidthChange(width) {\n    const validatedWidth = validateWidth(width);\n    annotation.setWidth(validatedWidth);\n    setWidth(validatedWidth);\n    redrawAnnotation(annotation);\n  }\n\n  function onHeightChange(height) {\n    const validatedHeight = validateHeight(height);\n    annotation.setHeight(validatedHeight);\n    setHeight(validatedHeight);\n    redrawAnnotation(annotation);\n  }\n\n  function validateWidth(width) {\n    const documentWidth = getPageWidth();\n    const maxWidth = documentWidth - annotation.X;\n    if (width > maxWidth) {\n      return maxWidth;\n    }\n    return width;\n  }\n\n  function validateHeight(height) {\n    const documentHeight = getPageHeight();\n    const maxHeight = documentHeight - annotation.Y;\n    if (height > maxHeight) {\n      return maxHeight;\n    }\n    return height;\n  }\n\n  function onCancel() {\n    // If the field name is empty, delete the annotation\n    if (!isValid) {\n      const { value } = fields.find((field) => field.label.includes('fieldName'));\n      if (value.trim() === '') {\n        deleteAnnotation(annotation);\n        closeFormFieldEditPopup();\n        return;\n      }\n    }\n    // If width/height changed return to original values\n    if (width !== initialWidth || height !== initialHeight) {\n      annotation.setWidth(initialWidth);\n      annotation.setHeight(initialHeight);\n    }\n    redrawAnnotation(annotation);\n    closeFormFieldEditPopup();\n  }\n\n  function renderInput(field) {\n    if (field.type === 'text') {\n      return renderTextInput(field);\n    }\n    if (field.type === 'select') {\n      return renderSelectInput(field);\n    }\n  }\n\n  function renderTextInput(field) {\n    return (\n      <Input\n        type=\"text\"\n        onChange={(event) => field.onChange(event.target.value)}\n        value={field.value}\n        fillWidth=\"false\"\n        messageText={field.required && !isValid ? t(validationMessage) : ''}\n        message={field.required && !isValid ? 'warning' : 'default'}\n        autoFocus={field.focus}\n      />\n    );\n  }\n\n  function renderSelectInput(field) {\n    const displayRadioGroups = radioButtonGroups.map((group) => ({ value: group, label: group }));\n    return (\n      <>\n        <CreatableDropdown\n          textPlaceholder={t('formField.formFieldPopup.fieldName')}\n          options={displayRadioGroups}\n          onChange={(inputValue) => onSelectInputChange(field, inputValue)}\n          value={radioButtonGroup}\n          isValid={isValid}\n          messageText={t(validationMessage)}\n        />\n        <div className=\"radio-group-label\">{t('formField.formFieldPopup.radioGroups')}</div>\n      </>\n    );\n  }\n\n  function renderListOptions() {\n    return (\n      <div className=\"field-options-container\">\n        {t('formField.formFieldPopup.options')}\n        <CreatableList options={options} onOptionsUpdated={onOptionsChange} popupRef={popupRef}/>\n      </div>\n    );\n  }\n\n  const indicatorPlaceholder = t(`formField.formFieldPopup.indicatorPlaceHolders.${annotation.getFormFieldPlaceholderType()}`);\n\n  return (\n    <div className={className} ref={popupRef}>\n      <div className=\"fields-container\">\n        {fields.map((field) => (\n          <div className=\"field-input\" key={field.label}>\n            <label>\n              {t(field.label)}\n              {field.required ? '*' : ''}:\n            </label>\n            {renderInput(field)}\n          </div>\n        ))}\n      </div>\n      {options && renderListOptions()}\n      <div className=\"field-flags-container\">\n        <span className=\"field-flags-title\">{t('formField.formFieldPopup.flags')}</span>\n        {flags.map((flag) => (\n          <Choice\n            key={flag.label}\n            checked={flag.isChecked}\n            onChange={(event) => flag.onChange(event.target.checked)}\n            label={t(flag.label)}\n          />\n        ))}\n      </div>\n      <FormFieldPopupDimensionsInput\n        width={width}\n        height={height}\n        onWidthChange={onWidthChange}\n        onHeightChange={onHeightChange}\n      />\n      <HorizontalDivider />\n      <FormFieldEditPopupIndicator\n        indicator={indicator}\n        indicatorPlaceholder={indicatorPlaceholder}\n      />\n      <div className=\"form-buttons-container\">\n        <Button\n          className=\"cancel-form-field-button\"\n          onClick={onCancel}\n          dataElement=\"formFieldCancel\"\n          label={t('formField.formFieldPopup.cancel')}\n        />\n        <Button\n          className=\"ok-form-field-button\"\n          onClick={closeFormFieldEditPopup}\n          dataElement=\"formFieldOK\"\n          label={t('action.ok')}\n          disabled={!isValid}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FormFieldEditPopup;\n","import React, { useState } from 'react';\nimport Select, { components } from 'react-select';\nimport { useTranslation } from 'react-i18next';\nimport Icon from 'components/Icon';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport SignatureModes from 'constants/signatureModes';\n\nimport ReactSelectWebComponentProvider from 'src/components/ReactSelectWebComponentProvider';\n\nimport './SignatureOptionsDropdown.scss';\n\nconst getStyles = (isDarkMode) => ({\n  valueContainer: (base) => ({\n    ...base,\n    padding: '2px',\n  }),\n  control: (base) => ({\n    ...base,\n    backgroundColor: isDarkMode ? '#21242A' : '#FFFFFF',\n    minHeight: '28px',\n    borderColor: isDarkMode ? '#485056' : '#CFD4DA',\n    '&:hover': {\n      borderColor: isDarkMode ? '#485056' : '#CFD4DA',\n    },\n  }),\n  container: (base) => ({\n    ...base,\n    backgroundColor: isDarkMode ? '#21242A' : '#FFFFFF',\n    height: '29px',\n    borderColor: isDarkMode ? '#485056' : 'red',\n    '&:hover': {\n      borderColor: isDarkMode ? '#485056' : '#CFD4DA',\n    },\n  }),\n  indicatorsContainer: (base) => {\n    return {\n      ...base,\n      paddingRight: '6px',\n      height: '26px',\n    };\n  },\n});\n\nconst CustomArrowIndicator = (props) => {\n  const { selectProps } = props;\n  const { menuIsOpen } = selectProps;\n  return (\n    <components.IndicatorsContainer {...props}>\n      <Icon className=\"arrow\" glyph={`icon-chevron-${menuIsOpen ? 'up' : 'down'}`} />\n    </components.IndicatorsContainer>\n  );\n};\n\nconst SignatureOptionsDropdown = (props) => {\n  const { onChangeHandler, initialOption } = props;\n  const { t } = useTranslation();\n  const styles = getStyles(false);\n  const signatureOptions = [\n    { value: SignatureModes.FULL_SIGNATURE, label: t('formField.types.signature') },\n    { value: SignatureModes.INITIALS, label: t('option.type.initials') },\n  ];\n\n  const init = signatureOptions.find((option) => option.value === initialOption);\n  const [value, setValue] = useState(init);\n\n  const onChange = (option) => {\n    setValue(option);\n    onChangeHandler(option);\n  };\n\n  return (\n    <DataElementWrapper className=\"signature-options-container\" dataElement=\"signatureOptionsDropdown\">\n      <label>{t('formField.type')}:</label>\n      <ReactSelectWebComponentProvider>\n        <Select\n          value={value}\n          onChange={onChange}\n          styles={styles}\n          options={signatureOptions}\n          isSearchable={false}\n          isClearable={false}\n          components={{ IndicatorsContainer: CustomArrowIndicator }}\n        />\n      </ReactSelectWebComponentProvider>\n    </DataElementWrapper>\n  );\n};\n\nexport default SignatureOptionsDropdown;","import SignatureOptionsDropdown from './SignatureOptionsDropdown';\n\nexport default SignatureOptionsDropdown;","import React, { useState } from 'react';\nimport classNames from 'classnames';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { Choice, Input } from '@pdftron/webviewer-react-toolkit';\nimport FormFieldPopupDimensionsInput from '../FormFieldPopupDimensionsInput';\nimport FormFieldEditPopupIndicator from '../FormFieldEditPopupIndicator';\nimport SignatureOptionsDropdown from './SignatureOptionsDropdown';\nimport HorizontalDivider from 'components/HorizontalDivider';\n\nimport '../FormFieldEditPopup.scss';\n\nconst FormFieldEditSignaturePopup = ({\n  fields,\n  flags,\n  closeFormFieldEditPopup,\n  isValid,\n  validationMessage,\n  annotation,\n  getPageHeight,\n  getPageWidth,\n  redrawAnnotation,\n  onSignatureOptionChange,\n  getSignatureOptionHandler,\n  indicator,\n  deleteAnnotation\n}) => {\n  const { t } = useTranslation();\n  const className = classNames({\n    Popup: true,\n    FormFieldEditPopup: true,\n  });\n\n  const [width, setWidth] = useState((annotation.Width).toFixed(0));\n  const [height, setHeight] = useState((annotation.Height).toFixed(0));\n\n  const [initialWidth] = useState((annotation.Width).toFixed(0));\n  const [initialHeight] = useState((annotation.Height).toFixed(0));\n  const [indicatorPlaceholder, setIndicatorPlaceholder] = useState(t(`formField.formFieldPopup.indicatorPlaceHolders.SignatureFormField.${getSignatureOptionHandler(annotation)}`));\n\n\n  function onWidthChange(width) {\n    const validatedWidth = validateWidth(width);\n    annotation.setWidth(validatedWidth);\n    setWidth(validatedWidth);\n    redrawAnnotation(annotation);\n  }\n\n  function onHeightChange(height) {\n    const validatedHeight = validateHeight(height);\n    annotation.setHeight(validatedHeight);\n    setHeight(validatedHeight);\n    redrawAnnotation(annotation);\n  }\n\n  function validateWidth(width) {\n    const documentWidth = getPageWidth();\n    const maxWidth = documentWidth - annotation.X;\n    if (width > maxWidth) {\n      return maxWidth;\n    }\n    return width;\n  }\n\n  function validateHeight(height) {\n    const documentHeight = getPageHeight();\n    const maxHeight = documentHeight - annotation.Y;\n    if (height > maxHeight) {\n      return maxHeight;\n    }\n    return height;\n  }\n\n  function onCancel() {\n    // If the field name is empty, delete the annotation\n    if (!isValid) {\n      // check if string includes value\n      const { value } = fields.find((field) => field.label.includes('fieldName'));\n      if (value.trim() === '') {\n        deleteAnnotation(annotation);\n        closeFormFieldEditPopup();\n        return;\n      }\n    }\n    // If width/height changed return to original values\n    if (width !== initialWidth || height !== initialHeight) {\n      annotation.setWidth(initialWidth);\n      annotation.setHeight(initialHeight);\n    }\n    redrawAnnotation(annotation);\n    closeFormFieldEditPopup();\n  }\n\n  function renderTextInput(field) {\n    return (\n      <Input\n        type=\"text\"\n        onChange={(event) => field.onChange(event.target.value)}\n        value={field.value}\n        fillWidth=\"false\"\n        messageText={field.required && !isValid ? t(validationMessage) : ''}\n        message={field.required && !isValid ? 'warning' : 'default'}\n        autoFocus={field.focus}\n      />\n    );\n  }\n\n  const onOptionChange = (option) => {\n    onSignatureOptionChange(option);\n    const { value } = option;\n    setIndicatorPlaceholder(t(`formField.formFieldPopup.indicatorPlaceHolders.SignatureFormField.${value}`));\n  };\n\n  return (\n    <div className={className}>\n      <SignatureOptionsDropdown onChangeHandler={onOptionChange} initialOption={getSignatureOptionHandler(annotation)} />\n      <div className=\"fields-container\">\n        {fields.map((field) => (\n          <div className=\"field-input\" key={field.label}>\n            <label>\n              {t(field.label)}{field.required ? '*' : ''}:\n            </label>\n            {renderTextInput(field)}\n          </div>\n        ))}\n      </div>\n      <div className=\"field-flags-container\">\n        <span className=\"field-flags-title\">{t('formField.formFieldPopup.flags')}</span>\n        {flags.map((flag) => (\n          <Choice\n            key={flag.label}\n            checked={flag.isChecked}\n            onChange={(event) => flag.onChange(event.target.checked)}\n            label={t(flag.label)}\n          />\n        ))}\n      </div>\n      <FormFieldPopupDimensionsInput\n        width={width}\n        height={height}\n        onWidthChange={onWidthChange}\n        onHeightChange={onHeightChange}\n      />\n      <HorizontalDivider />\n      <FormFieldEditPopupIndicator\n        indicator={indicator}\n        indicatorPlaceholder={indicatorPlaceholder}\n      />\n      <div className=\"form-buttons-container\">\n        <Button\n          className=\"cancel-form-field-button\"\n          onClick={onCancel}\n          dataElement=\"formFieldCancel\"\n          label={t('formField.formFieldPopup.cancel')}\n        />\n        <Button\n          className=\"ok-form-field-button\"\n          onClick={closeFormFieldEditPopup}\n          dataElement=\"formFieldOK\"\n          label={t('action.ok')}\n          disabled={!isValid}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default FormFieldEditSignaturePopup;\n","import FormFieldEditSignaturePopup from './FormFieldEditSignaturePopup';\n\nexport default FormFieldEditSignaturePopup;","import React, { useEffect, useState, useRef, useLayoutEffect, useCallback } from 'react';\nimport Draggable from 'react-draggable';\nimport core from 'core';\nimport FormFieldEditPopup from './FormFieldEditPopup';\nimport FormFieldEditSignaturePopup from './FormFieldEditSignaturePopup';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport classNames from 'classnames';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport { getAnnotationPopupPositionBasedOn } from 'helpers/getPopupPosition';\nimport DataElementWrapper from '../DataElementWrapper';\nimport { isMobileSize } from 'helpers/getDeviceSize';\nimport DataElements from 'constants/dataElement';\nimport { PRIORITY_THREE } from 'constants/actionPriority';\nimport './FormFieldEditPopup.scss';\n\nfunction FormFieldEditPopupContainer({ annotation }) {\n  const formFieldCreationManager = core.getFormFieldCreationManager();\n  const fieldLabels = formFieldCreationManager.getFieldLabels();\n  const [fieldName, setFieldName] = useState('');\n  const [fieldValue, setFieldValue] = useState('');\n  const [isReadOnly, setReadOnly] = useState(false);\n  const [isMultiLine, setMultiLine] = useState(false);\n  const [isRequired, setIsRequired] = useState(false);\n  const [isMultiSelect, setIsMultiSelect] = useState(false);\n  const [isValid, setIsValid] = useState(true);\n  const [radioButtonGroups, setRadioButtonGroups] = useState([]);\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const [validationMessage, setValidationMessage] = useState('');\n  const [showIndicator, setShowIndicator] = useState(false);\n  const [indicatorText, setIndicatorText] = useState('');\n  const popupRef = useRef();\n\n  const [isOpen] = useSelector(\n    (state) => [selectors.isElementOpen(state, DataElements.FORM_FIELD_EDIT_POPUP)],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n\n  useOnClickOutside(popupRef, () => {\n    if (fieldName.trim() !== '') {\n      closeAndReset();\n    }\n  });\n\n  function closeAndReset() {\n    dispatch(actions.enableElement(DataElements.ANNOTATION_POPUP, PRIORITY_THREE));\n    dispatch(actions.closeElement(DataElements.FORM_FIELD_EDIT_POPUP));\n    setFieldName('');\n    setFieldValue('');\n    setReadOnly(false);\n    setMultiLine(false);\n    setIsRequired(false);\n    setIsMultiSelect(false);\n    setIsValid(true);\n    setShowIndicator(false);\n    setIndicatorText('');\n  }\n\n\n  const deleteFormFieldPlaceholder = useCallback((annotation) => {\n    core.deleteAnnotations([annotation]);\n  }, []);\n\n  useEffect(() => {\n    const onFormFieldCreationModeStarted = () => {\n      // Do some cleanup of radio button groups,\n      // gets rid of groups that may have been added but never actually placed as fields\n      // or that were created but unlinked from a widget\n      setRadioButtonGroups(formFieldCreationManager.getRadioButtonGroups());\n    };\n\n    core.addEventListener('formFieldCreationModeStarted', onFormFieldCreationModeStarted);\n\n    return () => {\n      core.removeEventListener('formFieldCreationModeStarted', onFormFieldCreationModeStarted);\n    };\n  }, []);\n\n  // When we open the popup we need to populate the radio list with radio groups that are created,\n  // but not yet added as fields\n  useEffect(() => {\n    const radioButtons = core.getAnnotationsList().filter((annotation) => {\n      return annotation.isFormFieldPlaceholder() && annotation.getFormFieldPlaceholderType() === 'RadioButtonFormField';\n    });\n    const radioGroups = radioButtons.map((radioButton) => {\n      return formFieldCreationManager.getFieldName(radioButton);\n    });\n    const dedupedRadioGroups = [...(new Set([...radioGroups]))];\n    setRadioButtonGroups(dedupedRadioGroups);\n  }, []);\n\n  // We use layout effect to avoid a flickering as the popup is repositioned\n  // The flow is open popup -> update position.\n  // So we first open with an old position and then re-render to the new position. By using layoutEffect\n  // we let the hook run and update the position, and then the browser updates\n  useLayoutEffect(() => {\n    const setPopupPosition = () => {\n      if (popupRef.current) {\n        setPosition(getAnnotationPopupPositionBasedOn(annotation, popupRef));\n      }\n    };\n\n    if (isOpen && annotation) {\n      setPopupPosition();\n      setFieldName(formFieldCreationManager.getFieldName(annotation));\n      setFieldValue(formFieldCreationManager.getFieldValue(annotation));\n      setReadOnly(formFieldCreationManager.getFieldFlag(annotation, fieldLabels.READ_ONLY));\n      setMultiLine(formFieldCreationManager.getFieldFlag(annotation, fieldLabels.MULTI_LINE));\n      setIsRequired(formFieldCreationManager.getFieldFlag(annotation, fieldLabels.REQUIRED));\n      setIsMultiSelect(formFieldCreationManager.getFieldFlag(annotation, fieldLabels.MULTI_SELECT));\n      const dedupedRadioGroups = [...(new Set([...radioButtonGroups, ...formFieldCreationManager.getRadioButtonGroups()]))];\n      setRadioButtonGroups(dedupedRadioGroups);\n      // Field name is required, so if this is an empty string\n      // the field is not valid and the user should be warned\n      // As a failsafe the FormFieldCreationManager will create a unique field name if this is left blank\n      const isFieldNameValid = !!formFieldCreationManager.getFieldName(annotation);\n      setIsValid(isFieldNameValid);\n      let validationMessage = '';\n      if (!isFieldNameValid) {\n        validationMessage = 'formField.formFieldPopup.invalidField.empty';\n      }\n      setValidationMessage(validationMessage);\n      setShowIndicator(formFieldCreationManager.getShowIndicator(annotation));\n      setIndicatorText(formFieldCreationManager.getIndicatorText(annotation));\n    }\n  }, [isOpen]);\n\n  const onFieldNameChange = useCallback((name) => {\n    const validatedResponse = formFieldCreationManager.setFieldName(annotation, name);\n    setIsValid(validatedResponse.isValid);\n    mapValidationResponseToTranslation(validatedResponse);\n    setFieldName(name);\n  }, [annotation]);\n\n  const mapValidationResponseToTranslation = (validationResponse) => {\n    const { errorType } = validationResponse;\n    let translationKey = '';\n\n    switch (errorType) {\n      case 'empty':\n        translationKey = 'formField.formFieldPopup.invalidField.empty';\n        break;\n      case 'duplicate':\n        translationKey = 'formField.formFieldPopup.invalidField.duplicate';\n        break;\n    }\n\n    setValidationMessage(translationKey);\n  };\n\n  const onFieldValueChange = useCallback((value) => {\n    setFieldValue(value);\n    formFieldCreationManager.setFieldValue(annotation, value);\n  }, [annotation]);\n\n  const onReadOnlyChange = useCallback((isReadOnly) => {\n    setReadOnly(isReadOnly);\n    formFieldCreationManager.setFieldFlag(annotation, fieldLabels.READ_ONLY, isReadOnly);\n  }, [annotation]);\n\n  const onMultiLineChange = useCallback((isMultiLine) => {\n    setMultiLine(isMultiLine);\n    formFieldCreationManager.setFieldFlag(annotation, fieldLabels.MULTI_LINE, isMultiLine);\n  }, [annotation]);\n\n  const onRequiredChange = useCallback((isRequired) => {\n    setIsRequired(isRequired);\n    formFieldCreationManager.setFieldFlag(annotation, fieldLabels.REQUIRED, isRequired);\n  }, [annotation]);\n\n  const onMultiSelectChange = useCallback((isMultiSelect) => {\n    setIsMultiSelect(isMultiSelect);\n    formFieldCreationManager.setFieldFlag(annotation, fieldLabels.MULTI_SELECT, isMultiSelect);\n  }, [annotation]);\n\n  const onFieldOptionsChange = useCallback((options) => {\n    formFieldCreationManager.setFieldOptions(annotation, options);\n  }, [annotation]);\n\n  const onShowFieldIndicatorChange = useCallback((showIndicator) => {\n    setShowIndicator(showIndicator);\n    formFieldCreationManager.setShowIndicator(annotation, showIndicator);\n  }, [annotation]);\n\n  const onFieldIndicatorTextChange = useCallback((indicatorText) => {\n    setIndicatorText(indicatorText);\n    formFieldCreationManager.setIndicatorText(annotation, indicatorText);\n  }, [annotation]);\n\n  const closeFormFieldEditPopup = useCallback(() => {\n    closeAndReset();\n  }, []);\n\n  const onCloseRadioButtonPopup = useCallback(() => {\n    // Add new radio group (if any) to existing radio groups and we were in a valid state\n    if (isValid && radioButtonGroups.indexOf(fieldName) === -1 && fieldName !== '') {\n      setRadioButtonGroups([fieldName, ...radioButtonGroups]);\n    }\n    closeAndReset();\n  }, [fieldName, radioButtonGroups]);\n\n  const redrawAnnotation = useCallback((annotation) => {\n    core.getAnnotationManager().drawAnnotationsFromList([annotation]);\n  }, []);\n\n  const getPageHeight = useCallback(() => {\n    return core.getPageHeight(core.getCurrentPage());\n  }, []);\n\n  const getPageWidth = useCallback(() => {\n    return core.getPageWidth(core.getCurrentPage());\n  }, []);\n\n  const onSignatureOptionChange = useCallback((signatureOption) => {\n    const { value } = signatureOption;\n    formFieldCreationManager.setSignatureOption(annotation, value);\n  }, [annotation]);\n\n  const getSignatureOption = useCallback((formFieldPlaceHolder) => {\n    return formFieldCreationManager.getSignatureOption(formFieldPlaceHolder);\n  }, []);\n\n  const fields = {\n    NAME: {\n      label: 'formField.formFieldPopup.fieldName',\n      onChange: onFieldNameChange,\n      value: fieldName,\n      required: true,\n      type: 'text',\n      focus: true,\n    },\n    VALUE: {\n      label: 'formField.formFieldPopup.fieldValue',\n      onChange: onFieldValueChange,\n      value: fieldValue,\n      type: 'text',\n    },\n    RADIO_GROUP: {\n      label: 'formField.formFieldPopup.fieldName',\n      onChange: onFieldNameChange,\n      value: fieldName,\n      required: true,\n      type: 'select',\n    },\n  };\n\n  const textFields = [fields['NAME'], fields['VALUE']];\n\n  const defaultFields = [fields['NAME']];\n\n  const radioButtonFields = [fields['RADIO_GROUP']];\n\n  const listBoxFields = [fields['NAME']];\n\n  const comboBoxFields = [fields['NAME']];\n\n  const isMobile = isMobileSize();\n\n  const flags = {\n    READ_ONLY: {\n      label: 'formField.formFieldPopup.readOnly',\n      onChange: onReadOnlyChange,\n      isChecked: isReadOnly,\n    },\n    MULTI_LINE: {\n      label: 'formField.formFieldPopup.multiLine',\n      onChange: onMultiLineChange,\n      isChecked: isMultiLine,\n    },\n    REQUIRED: {\n      label: 'formField.formFieldPopup.required',\n      onChange: onRequiredChange,\n      isChecked: isRequired,\n    },\n    MULTI_SELECT: {\n      label: 'formField.formFieldPopup.multiSelect',\n      onChange: onMultiSelectChange,\n      isChecked: isMultiSelect,\n    },\n  };\n\n  const textFieldFlags = [flags['READ_ONLY'], flags['MULTI_LINE'], flags['REQUIRED']];\n\n  const signatureFlags = [flags['REQUIRED'], flags['READ_ONLY']];\n\n  const checkBoxFlags = [flags['READ_ONLY'], flags['REQUIRED']];\n\n  const radioButtonFlags = [flags['READ_ONLY'], flags['REQUIRED']];\n\n  const listBoxFlags = [flags['MULTI_SELECT'], flags['READ_ONLY'], flags['REQUIRED']];\n\n  const comboBoxFlags = [flags['READ_ONLY'], flags['REQUIRED']];\n\n  const indicator = {\n    label: 'formField.formFieldPopup.documentFieldIndicator',\n    toggleIndicator: onShowFieldIndicatorChange,\n    isChecked: showIndicator,\n    onChange: onFieldIndicatorTextChange,\n    value: indicatorText,\n  };\n\n  const renderTextFormFieldEditPopup = () => (\n    <FormFieldEditPopup\n      fields={textFields}\n      flags={textFieldFlags}\n      closeFormFieldEditPopup={closeFormFieldEditPopup}\n      isValid={isValid}\n      validationMessage={validationMessage}\n      annotation={annotation}\n      redrawAnnotation={redrawAnnotation}\n      getPageHeight={getPageHeight}\n      getPageWidth={getPageWidth}\n      indicator={indicator}\n      deleteAnnotation={deleteFormFieldPlaceholder}\n    />\n  );\n\n  const renderSignatureFormFieldEditPopup = () => (\n    <FormFieldEditSignaturePopup\n      fields={defaultFields}\n      flags={signatureFlags}\n      closeFormFieldEditPopup={closeFormFieldEditPopup}\n      isValid={isValid}\n      validationMessage={validationMessage}\n      annotation={annotation}\n      redrawAnnotation={redrawAnnotation}\n      getPageHeight={getPageHeight}\n      getPageWidth={getPageWidth}\n      onSignatureOptionChange={onSignatureOptionChange}\n      getSignatureOptionHandler={getSignatureOption}\n      indicator={indicator}\n      deleteAnnotation={deleteFormFieldPlaceholder}\n    />\n  );\n\n  const renderCheckboxFormFieldEditPopup = () => (\n    <FormFieldEditPopup\n      fields={defaultFields}\n      flags={checkBoxFlags}\n      closeFormFieldEditPopup={closeFormFieldEditPopup}\n      isValid={isValid}\n      validationMessage={validationMessage}\n      annotation={annotation}\n      redrawAnnotation={redrawAnnotation}\n      getPageHeight={getPageHeight}\n      getPageWidth={getPageWidth}\n      indicator={indicator}\n      deleteAnnotation={deleteFormFieldPlaceholder}\n    />\n  );\n\n  const renderRadioButtonFormFieldEditPopup = () => (\n    <FormFieldEditPopup\n      fields={radioButtonFields}\n      flags={radioButtonFlags}\n      closeFormFieldEditPopup={onCloseRadioButtonPopup}\n      isValid={isValid}\n      validationMessage={validationMessage}\n      radioButtonGroups={radioButtonGroups}\n      annotation={annotation}\n      selectedRadioGroup={fieldName}\n      redrawAnnotation={redrawAnnotation}\n      getPageHeight={getPageHeight}\n      getPageWidth={getPageWidth}\n      indicator={indicator}\n      deleteAnnotation={deleteFormFieldPlaceholder}\n    />\n  );\n\n  const renderListBoxFormFieldEditPopup = () => {\n    const fieldOptions = formFieldCreationManager.getFieldOptions(annotation);\n\n    return (\n      <FormFieldEditPopup\n        fields={listBoxFields}\n        flags={listBoxFlags}\n        options={fieldOptions}\n        onOptionsChange={onFieldOptionsChange}\n        closeFormFieldEditPopup={closeFormFieldEditPopup}\n        isValid={isValid}\n        validationMessage={validationMessage}\n        annotation={annotation}\n        redrawAnnotation={redrawAnnotation}\n        getPageHeight={getPageHeight}\n        getPageWidth={getPageWidth}\n        indicator={indicator}\n        deleteAnnotation={deleteFormFieldPlaceholder}\n      />\n    );\n  };\n\n  const renderComboBoxFormFieldEditPopup = () => {\n    const fieldOptions = formFieldCreationManager.getFieldOptions(annotation);\n\n    return (\n      <FormFieldEditPopup\n        fields={comboBoxFields}\n        flags={comboBoxFlags}\n        options={fieldOptions}\n        onOptionsChange={onFieldOptionsChange}\n        closeFormFieldEditPopup={closeFormFieldEditPopup}\n        isValid={isValid}\n        validationMessage={validationMessage}\n        annotation={annotation}\n        redrawAnnotation={redrawAnnotation}\n        getPageHeight={getPageHeight}\n        getPageWidth={getPageWidth}\n        indicator={indicator}\n        deleteAnnotation={deleteFormFieldPlaceholder}\n      />\n    );\n  };\n\n  const renderPopUp = () => {\n    const intent = annotation?.getFormFieldPlaceholderType();\n    if (intent === 'TextFormField') {\n      return renderTextFormFieldEditPopup();\n    }\n    if (intent === 'SignatureFormField') {\n      return renderSignatureFormFieldEditPopup();\n    }\n    if (intent === 'CheckBoxFormField') {\n      return renderCheckboxFormFieldEditPopup();\n    }\n    if (intent === 'RadioButtonFormField') {\n      return renderRadioButtonFormFieldEditPopup();\n    }\n    if (intent === 'ListBoxFormField') {\n      return renderListBoxFormFieldEditPopup();\n    }\n    if (intent === 'ComboBoxFormField') {\n      return renderComboBoxFormFieldEditPopup();\n    }\n    return null;\n  };\n\n  const renderFormFieldEditPopup = () => (\n    <DataElementWrapper\n      className={classNames({\n        Popup: true,\n        FormFieldEditPopupContainer: true,\n        open: isOpen,\n        closed: !isOpen,\n      })}\n      data-element={DataElements.FORM_FIELD_EDIT_POPUP}\n      style={{ ...position }}\n      ref={popupRef}\n    >\n      {isOpen && renderPopUp()}\n    </DataElementWrapper>\n  );\n\n  if (!isMobile) {\n    // disable draggable on mobile devices\n    return (\n      <Draggable cancel=\".Button, .cell, .sliders-container svg, .creatable-list, .ui__input__input, .form-dimension-input, .ui__choice__input\">\n        {renderFormFieldEditPopup()}\n      </Draggable>\n    );\n  }\n  return renderFormFieldEditPopup();\n}\n\nexport default React.memo(FormFieldEditPopupContainer);\n","import FormFieldEditPopup from './FormFieldEditPopupContainer';\n\nexport default FormFieldEditPopup;"],"sourceRoot":""}